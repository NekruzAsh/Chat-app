(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1519:function(e,t,s){Promise.resolve().then(s.bind(s,2718))},2718:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),n=s(2265),l=s(994),r=s(3085),i=s(4086);let c=(0,l.ZF)({apiKey:"AIzaSyB4q9vgpVe2YDBA_fnRp-H74Jf-fpcKXUY",authDomain:"chatapp-3a0e9.firebaseapp.com",projectId:"chatapp-3a0e9",storageBucket:"chatapp-3a0e9.appspot.com",messagingSenderId:"710489239873",appId:"1:710489239873:web:e1c1e8ae45d068c043b1c0"}),o=(0,r.v0)(c),d=(0,i.ad)(c);var x=s(5496),u=s(2135);let m=()=>{let e=new r.hJ;(0,r.F6)(o,e)};var h=()=>(0,a.jsx)("div",{className:" flex justify-center",children:(0,a.jsx)(u.ZP,{onClick:m})}),f=()=>(0,a.jsx)("button",{onClick:()=>o.signOut(),className:"bg-blue-300 px-4 py-2 hover:bg-blue-600 text-gray-800 text-2xl font-bold",children:"logout"}),p=()=>{let[e]=(0,x.F_)(o);return(0,a.jsxs)("div",{className:"h-20 bg-indigo-500 flex justify-between items-center p-4",children:[(0,a.jsx)("h1",{className:"text-gray-800 text-2xl font-bold ml-2",children:"ChatMingle"}),e?(0,a.jsx)(f,{}):(0,a.jsx)(h,{})]})};let g={name:"absolute mt-[-4rem] text-gray-800 text-xs",message:"flex items-center shadow-xl m-4 py-2 px-3 rounded-tl-full rounded-tr-full",sent:" bg-indigo-800 text-white flex-row-reverse text-end float-right rounded-bl-full",received:"bg-pink-600 text-white float-left rounded-br-full"};var b=e=>{let{message:t}=e,s=t.uid===o.currentUser.uid?"".concat(g.sent):"".concat(g.received);return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"".concat(g.message," ").concat(s),children:[(0,a.jsx)("p",{className:g.name,children:t.name}),(0,a.jsx)("p",{children:t.text})]})})},j=e=>{let{scroll:t}=e,[s,l]=(0,n.useState)(""),r=async e=>{if(e.preventDefault(),""===s){alert("Please enter a message");return}let{uid:a,displayName:n}=o.currentUser;await (0,i.ET)((0,i.hJ)(d,"messages"),{text:s,name:n,uid:a,timestamp:(0,i.Bt)()}),l(""),t.current.scrollIntoView({behavior:"smooth"})};return(0,a.jsxs)("form",{onSubmit:r,className:"fixed bottom-[224px] h-14 w-full max-w-[728px] flex text-xl",children:[(0,a.jsx)("input",{value:s,onChange:e=>l(e.target.value),className:"w-full text-xl p-3 text-white outline-none border-none rounded-lg mb-2",type:"text",placeholder:"Message"}),(0,a.jsx)("button",{type:"submit",className:"btn md:btn-md w-[20%]  text-white hover:bg-indigo-700",children:"Send"})]})},v=()=>{let[e,t]=(0,n.useState)([]),s=(0,n.useRef)();return(0,n.useEffect)(()=>{let e=(0,i.IO)((0,i.hJ)(d,"messages"),(0,i.Xo)("timestamp")),s=(0,i.cf)(e,e=>{let s=[];e.forEach(e=>{s.push({...e.data(),id:e.id})}),t(s)});return()=>s()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("main",{className:"flex flex-col p-[10px]",children:e&&e.map(e=>(0,a.jsx)(b,{message:e},e.id))}),(0,a.jsx)(j,{scroll:s}),(0,a.jsx)("span",{ref:s})]})};function w(){let[e]=(0,x.F_)(o);return(0,a.jsx)("div",{className:"max-w-[728px] mx-auto text-center",children:(0,a.jsxs)("section",{className:"overflow-auto flex flex-col h-[70vh] bg-indigo-300 mt-10 shadow-xl shadow-indigo-500 border border-indigo-400 relative",children:[(0,a.jsx)(p,{}),e?(0,a.jsx)(v,{}):null]})})}}},function(e){e.O(0,[358,220,836,971,938,744],function(){return e(e.s=1519)}),_N_E=e.O()}]);